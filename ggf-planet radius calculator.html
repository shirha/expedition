<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planet Radius Calculator</title>
    <style>
        table {
            border-collapse: collapse;
            margin: 20px;
        }
        th, td {
            border: 1px solid black;
            padding: 8px;
            text-align: center;
        }
        th, #radius, #circum {
            background-color: #f2f2f2;
        }
        input {
            width: 100px;
            text-align: center;
            border: none; /* No borders around input boxes */
        }
        input:focus {
            outline: none; /* No focus outline */
        }
    </style>
</head>
<body>
    <table>
    		<a href="https://docs.google.com/spreadsheets/d/1c_m8pWKHJ2BrvYw9gqEP3IvO6gzekUoXtXvgF_sVtag/edit?gid=0#gid=0" style="padding-left:20px;">GGF's Planet Radius Calculator</a> <a href="https://www.youtube.com/shorts/MrPU97Shny8"><img src="i/yt_icon.png" style="padding-left:10px;height:1em;"></a>
        <tr>
            <th>P1Lat</th>
            <th>P1Lon</th>
            <th>Dist(u)</th>
            <th>P2Lat</th>
            <th>P2Lon</th>
            <th>Radius(u)</th>
            <th>C(ku)</th>
        </tr>
        <tr>
            <td><input type="number" id="p1Lat" value="-8.36" step="any"></td>
            <td><input type="number" id="p1Lon" value="88.38" step="any"></td>
            <td><input type="number" id="dist" value="1029" step="any"></td>
            <td><input type="number" id="p2Lat" value="-5.74" step="any"></td>
            <td><input type="number" id="p2Lon" value="91.95" step="any"></td>
            <td id="radius">13380</td>
            <td id="circum">84</td>
        </tr>
    </table>

    <script>
        // Degrees to radians conversion factor
        const f = Math.PI / 180;

        // Function to calculate radius and circumference
        function calculate() {
            // Get input values
            const p1Lat = parseFloat(document.getElementById('p1Lat').value);
            const p1Lon = parseFloat(document.getElementById('p1Lon').value);
            const dist = parseFloat(document.getElementById('dist').value);
            const p2Lat = parseFloat(document.getElementById('p2Lat').value);
            const p2Lon = parseFloat(document.getElementById('p2Lon').value);

            // Haversine formula for radius
            const a = 0.5 - Math.cos((p2Lat - p1Lat) * f) / 2 +
                      Math.cos(p1Lat * f) * Math.cos(p2Lat * f) * (1 - Math.cos((p2Lon - p1Lon) * f)) / 2;
            const c = 2 * Math.asin(Math.sqrt(a));
            const radius = Math.round(dist / c); // Integer radius

            // Circumference in kilo-units (ku)
            const circum = Math.round(radius * 2 * Math.PI / 1000); // Updated formula

            // Update table
            document.getElementById('radius').textContent = radius + 'u';
            document.getElementById('circum').textContent = circum + 'ku';
        }

        // Add event listeners to inputs
        const inputs = document.querySelectorAll('input');
        inputs.forEach(input => {
            // Listener for input changes (recalculate)
            input.addEventListener('input', calculate);
            // Listener for focus (select text)
            input.addEventListener('focus', () => input.select());
        });

        // Initial calculation
        calculate();
    </script>
</body>
</html>